---
rules:
  - bean: java.lang:type=ClassLoading
    unit: "1"
    prefix: jvm.classes.
    type: gauge
    mapping:
      LoadedClassCount:
        metric: loaded
        desc: Number of loaded classes
  - bean: java.lang:type=GarbageCollector,*
    prefix: jvm.gc.collections.
    type: counter
    metricAttribute:
      name: param(name)
    mapping:
      CollectionCount:
        metric: count
        unit: "1"
        desc: Total number of collections that have occurred
      CollectionTime:
        metric: elapsed
        unit: ms
        desc: The approximate accumulated collection elapsed time in milliseconds
  - bean: java.lang:type=Memory
    unit: by
    prefix: jvm.memory.
    type: gauge
    mapping:
      HeapMemoryUsage.used:
        metric: heap.used
        desc: The current heap usage
      NonHeapMemoryUsage.used:
        metric: nonheap.used
        desc: The current non-heap usage
  - bean: java.lang:type=MemoryPool,*
    unit: by
    prefix: jvm.memory.pool.
    type: gauge
    metricAttribute:
      name: param(name)
    mapping:
      CollectionUsage.used:
        metric: used_after_last_gc
        desc: Memory used after the most recent gc event
      Usage.used:
        metric: used
        desc: Current memory pool used
  - bean: java.lang:type=Threading
    unit: "1"
    prefix: jvm.threads.
    type: gauge
    mapping:
      ThreadCount:
        metric: count
        desc: Number of threads
      DaemonThreadCount:
        metric: daemon
        desc: Number of daemon threads
  - bean: java.lang:type=OperatingSystem,*
    type: gauge
    mapping:
      TotalSwapSpaceSize:
        metric: jvm.system.swap.space.total
        desc: The host swap memory size in bytes
        unit: by
      FreeSwapSpaceSize:
        metric: jvm.system.swap.space.free
        desc: The amount of available swap memory in bytes
        unit: by
      TotalPhysicalMemorySize:
        metric: jvm.system.physical.memory.total
        desc: The total physical memory size in host
        unit: by
      FreePhysicalMemorySize:
        metric: jvm.system.physical.memory.free
        desc: The amount of free physical memory in host
        unit: by
      AvailableProcessors:
        metric: jvm.system.available.processors
        desc: The number of available processors
        unit: "1"
      SystemCpuLoad:
        metric: jvm.system.cpu.utilization
        desc: The current load of CPU in host
        unit: "1"
      CpuLoad:
        metric: jvm.system.cpu.utilization
        desc: The current load of CPU in host
        unit: "1"
      ProcessCpuTime:
        metric: jvm.cpu.time
        unit: ns
        desc: CPU time used
      ProcessCpuLoad:
        metric: jvm.cpu.recent_utilization
        unit: "1"
        desc: Recent CPU utilization for the process
      OpenFileDescriptorCount:
        metric: jvm.open_file_descriptor.count
        desc: The number of opened file descriptors
        unit: "1"
